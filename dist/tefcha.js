(function () {var O={};var W={};var G={},oa=G&&G.__extends||function(){var e=function(r,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])})(r,n)};return function(r,n){function t(){this.constructor=r}e(r,n),r.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}}(),aa=G&&G.__assign||function(){return(aa=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},P=G&&G.__spreadArrays||function(){for(var e=0,r=0,n=arguments.length;r<n;r++)e+=arguments[r].length;var t=Array(e),a=0;for(r=0;r<n;r++)for(var o=arguments[r],i=0,s=o.length;i<s;i++,a++)t[a]=o[i];return t},F=function(e){function r(r){var n=r.lineno,t=r.msg,a=r.src,o=void 0===a?"":a,i=t;n&&n>0&&(i="at line "+n+": "+i);var s="";return o&&n>0&&(s=o.split(/\n/).map(function(e,r){return{lineno:r+1,line:e}}).slice(Math.max(0,n-1-5),n-1+5).map(function(e){var r=e.lineno,t=e.line;return(r===n?">":" ")+r+": "+t}).join("\n")),e.call(this,i+"\n"+s)||this}return oa(r,e),r}(Error),ba=["if","else","elif","while","for","do","switch","case"],pa=P(ba,["continue","break","pass"]),qa=function(e,r){var n=[],t="",a=r.src,o=a.indentStr,i=a.commentStr;if(e.split(/\r\n|\r|\n/).forEach(function(e,r){if(r++,""!==(e=t+e).trim()){for(var a=0;e.startsWith(o);)a++,e=e.slice(o.length);e.startsWith(i)||(e.endsWith("\\")?t=e.slice(0,-1):(t="",n.push({lineno:r,line:e,nest:a})))}}),""!==t)throw new F({msg:"EOF is found after '\\'"});var s=Math.min.apply(Math,n.map(function(e){return e.nest}));return n=n.map(function(e){return aa(aa({},e),{nest:e.nest-s})})},ra=function(e,r){var n={type:"program",lineno:0,children:[]},t=[n];return e.forEach(function(e){var n=e.lineno,a=e.line,o=e.nest;if(t.length-1<o)throw new F({lineno:n,src:r,msg:"unexpected indent"});for(;t.length-1>o;)t.pop();var i=t.slice(-1)[0],s=a.split(" ")[0];if(pa.includes(s)){var $={type:s,lineno:n,content:a.slice(a.indexOf(" ")+1),children:[]};if(i.children.push($),ba.includes(s))"do"===(i.children.length>0?i.children.slice(-1)[0]:null).type&&"while"===s||t.push($)}else i.children.push({type:"text",lineno:n,content:a})}),n},ca=function(e,r,n){var t=e.children||[],a={type:"none",lineno:-1};t.forEach(function(o,i){var s=o.lineno;switch(o.type){case"program":case"text":case"if":break;case"else":if(!["if","elif"].includes(a.type))throw new F({lineno:s,src:n,msg:"before \"else\" statement, \"if\" or \"elif\" shoud exists."});break;case"elif":if(!["if","elif"].includes(a.type))throw new F({lineno:s,src:n,msg:"before \"elif\" statement, \"if\" or \"elif\" shoud exists."});break;case"while":case"switch":break;case"case":if("switch"!==e.type)throw new F({lineno:s,src:n,msg:"keyword \"case\" shoud be in \"switch\" statement."});break;case"continue":if(!P(r,[e]).some(function(e){return["for","while","do"].includes(e.type)}))throw new F({lineno:s,src:n,msg:"at ${lineno} \"continue\" statement shoud be in loop"});break;case"break":if(!P(r,[e]).some(function(e){return["for","while","do","case"].includes(e.type)}))throw new F({lineno:s,src:n,msg:"\"break\" statement shoud be in loop or \"case\"."});break;case"do":if(i+1>=t.length||"while"!==t[i+1].type)throw new F({lineno:s,src:n,msg:"cannot find corresponding keyword \"while\" to keyword \"do\"."});break;case"pass":break;default:throw new F({lineno:s,src:n,msg:"node type \""+o.type+"\" is not implemented yet."});}a=o}),t.forEach(function(t){return ca(t,P(r,[e]),n)})},da=function(e,r){var n=qa(e,r),t=ra(n,e);return ca(t,[],e),t};G.parse=da;var I={};var z={},J=z&&z.__extends||function(){var a=function(t,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var r in t)t.hasOwnProperty(r)&&(a[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}a(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sa=z&&z.__spreadArrays||function(){for(var a=0,t=0,r=arguments.length;t<r;t++)a+=arguments[t].length;var n=Array(a),$=0;for(t=0;t<r;t++)for(var e=arguments[t],i=0,o=e.length;i<o;i++,$++)n[$]=e[i];return n},K=Math.max,L=Math.min,H=function(){return function(a){var t=this,r=a.x,n=void 0===r?0:r,$=a.y,e=void 0===$?0:$,i=a.w,o=void 0===i?0:i,x=a.h,s=void 0===x?0:x,p=a.minX,m=void 0===p?0:p,u=a.minY,v=void 0===u?0:u,h=a.maxX,c=void 0===h?0:h,q=a.maxY,V=void 0===q?0:q;this.trans=function(a,r){return t.x+=a,t.y+=r,t},this.x=n,this.y=e,this.w=o,this.h=s,this.minX=m,this.minY=v,this.maxX=c,this.maxY=V}}(),M=function(a){function t(r){var n=r.x,$=r.y,e=a.call(this,{x:n,y:$})||this;return e.clone=function(){return new t({x:e.x,y:e.y})},e.type="point",e}return J(t,a),t}(H),k=function(a){function t(t){var r=t.x,n=t.y,$=t.cmds,e=t.isArrow,i=void 0!==e&&e,o=this,x=0,s=0,p=0,m=0,u=0,v=0;return $.forEach(function(a){var t=a[0],r=a[1];"h"===t?x+=r:s+=r,p=L(p,x),m=L(m,s),u=K(u,x),v=K(v,s)}),(o=a.call(this,{x:r,y:n,minX:p,minY:m,maxX:u,maxY:v,w:u-p,h:v-m})||this).cmds=$,o.isArrow=i,o.type="path",o}return J(t,a),t.vline=function(a){var r=a.x,n=a.y,$=a.step,e=a.isArrow;return new t({x:r,y:n,cmds:[["v",$]],isArrow:void 0!==e&&e})},t.hline=function(a){var r=a.x,n=a.y,$=a.step,e=a.isArrow;return new t({x:r,y:n,cmds:[["h",$]],isArrow:void 0!==e&&e})},t}(H),ea=function(a){function t(t){var r=t.content,n=t.w,$=t.h,e=t.x,i=void 0===e?0:e,o=t.y,x=void 0===o?0:o,s=t.isLabel,p=void 0!==s&&s,m=a.call(this,{x:i,y:x,maxX:n,maxY:$,w:n,h:$})||this;return m.content=r,m.type="text",m.isLabel=p,m}return J(t,a),t.createByMeasure=function(a){var r=a.x,n=void 0===r?0:r,$=a.y,e=void 0===$?0:$,i=a.text,o=a.attrs,x=a.measureText,s=a.isLabel,p=x(i,o);return new t({content:i,x:n,y:e,w:p.w,h:p.h,isLabel:s})},t}(H),fa=function(a){function t(t){var r=t.x,n=void 0===r?0:r,$=t.y,e=void 0===$?0:$,i=t.w,o=t.h,x=a.call(this,{x:n,y:e,w:i,h:o,maxX:i,maxY:o})||this;return x.type="rect",x}return J(t,a),t}(H),ga=function(a){function t(t){var r=t.x,n=void 0===r?0:r,$=t.y,e=void 0===$?0:$,i=t.w,o=t.h,x=a.call(this,{x:n,y:e,w:i,h:o,maxX:i,maxY:o})||this;return x.type="diamond",x}return J(t,a),t}(H),Q=function(a){function t(t){var r=t.x,n=t.y,$=t.children,e=a.call(this,{x:r,y:n})||this;return e.add=function(a){return e.minX=L(e.minX,a.x+a.minX),e.minY=L(e.minY,a.y+a.minY),e.maxX=K(e.maxX,a.x+a.maxX),e.maxY=K(e.maxY,a.y+a.maxY),e.w=e.maxX-e.minX,e.h=e.maxY-e.minY,e.children.push(a),e},0===$.length&&($=sa($,[new M({x:r,y:n})])),e.minX=L.apply(void 0,$.map(function(a){return a.x+a.minX})),e.minY=L.apply(void 0,$.map(function(a){return a.y+a.minY})),e.maxX=K.apply(void 0,$.map(function(a){return a.x+a.maxX})),e.maxY=K.apply(void 0,$.map(function(a){return a.y+a.maxY})),e.w=e.maxX-e.minX,e.h=e.maxY-e.minY,e.type="group",e.children=$,e}return J(t,a),t}(H);z.BaseShape=H,z.Group=Q,z.Diamond=ga,z.Rect=fa,z.Text=ea,z.Path=k,z.Point=M;var R=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={start:-1/0,end:-1/0,next:null},r=n;t.forEach(function(t){var e={start:t[0],end:t[1],next:null};r.next=e,r=e});var a={start:1/0,end:1/0,next:null};return r.next=a,n},S=function(){return function t(e){var n=this;this.clone=function(){return new t(n.ref)},this.findAllocatablePosition=function(t,e){for(var r=n.ref;r.next.start<t;)r=r.next;for(var a=Math.max(t,r.end);r.next.start-a<e;)a=(r=r.next).end;return n.ref=r,a},this.allocate=function(t,e){var r=n.findAllocatablePosition(t,e),a=r+e,o=n.ref;if(o.end===r)o.next.start===a?(o.end=o.next.end,o.next=o.next.next):o.end=a;else if(o.next.start===a)o.next.start=r,n.ref=o.next;else{var x={start:r,end:a,next:o.next};o.next=x,n.ref=x}return r},this.merge=function(t,e){var r=t+e;t=Math.max(t,n.ref.start);for(var a,o=n.ref;o.next.start<=t;)o=o.next;for(t<=o.end?a=o:(a={start:t,end:t,next:o.next},o.next=a,o=a);o.next.start<=r;)o=o.next;r<=o.end?(a.end=o.end,a.next=o.next):(a.end=r,a.next=o.next),n.ref=a},this.ranges=function(){var t=[],e=n.ref;for(e.start===-1/0&&(e=e.next);e.start!==1/0;)t.push({start:e.start,end:e.end}),e=e.next;return t},this.mergeAllocator=function(t){t.ranges().forEach(function(t){var e=t.start,r=t.end;n.merge(e,r-e)})},this.ref=e}}();var ha=I&&I.__assign||function(){return(ha=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},X=I&&I.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<i;t++)for(var a=arguments[t],n=0,l=a.length;n<l;n++,r++)o[r]=a[n];return o},Y={while:{break:"E",continue:"W"},doWhile:{break:"E",continue:"E"},for:{break:"E",continue:"W"}},_=function(){return function(e){void 0===e&&(e="none"),this.type=e,this.breakPoints=[],this.continuePoints=[]}}(),ia=function(){return function e(t){var i=this,o=t.shapes,r=t.measureText,a=t.config,n=t.loopInfo,l=t.LAlloc,s=t.RAlloc,c=t.x,$=t.y;this.shiftX=function(e){var t=i,o=t.shapes,r=t.loopInfo;o.trans(e,0),i.x+=e;var a=r.breakPoints,n=r.continuePoints;a.forEach(function(t){return t.trans(e,0)}),n.forEach(function(t){return t.trans(e,0)})},this.step=function(e){void 0===e&&(e=i.dy),i.shapes.add(k.vline({x:0,y:i.y,step:e})),i.move(e)},this.stepAbs=function(e){i.step(e-i.y)},this.move=function(e){void 0===e&&(e=i.dy),i.y+=e},this.moveAbs=function(e){i.move(e-i.y)},this.rect=function(e){var t=e.x,o=e.y,r=e.text,a=i.measureText(r,i.config.text.attrs),n=a.w,l=a.h,s=i.config.rect,c=n+2*s.padX,$=l+2*s.padY;return i.wrapText({cls:fa,text:r,x:t,y:o,w:c,h:$,tw:n,th:l})},this.diamond=function(e){var t=e.x,o=e.y,r=e.text,a=i.measureText(r,i.config.text.attrs),n=a.w,l=a.h,s=i.config.diamond.aspectRatio,c=n+l/s,$=l+n*s;return i.wrapText({cls:ga,text:r,x:t,y:o,w:c,h:$,tw:n,th:l})},this.wrapText=function(e){var t=e.cls,o=e.text,r=e.x,a=e.y,n=e.w,l=e.h,s=e.tw,c=e.th,$=i.text({text:o,x:-s/2,y:l/2-c/2,isLabel:!1}),h=new t({x:-n/2,w:n,h:l});return new Q({x:r,y:a,children:[$,h]})},this.text=function(e){var t=e.x,o=e.y,r=e.text,a=e.isLabel;return ea.createByMeasure({x:t,y:o,text:r,attrs:i.config.text.attrs,measureText:i.measureText,isLabel:a})},this.stepAndText=function(e){var t=i.dy,o=i.rect({x:0,y:0,text:e}),r=i.RAlloc.findAllocatablePosition(i.y,o.h+t);i.LAlloc.merge(r,o.h+t),i.stepAbs(r+t),o.trans(0,i.y),i.shapes.add(o),i.move(o.h)},this.stepAndDiamond=function(e){var t,o=e.content,r=e.yesDir,a=e.noDir,n=e.jumpLeft,l=void 0!==n&&n,s=(e.jumpRight,i),c=s.LAlloc,$=s.RAlloc,h=s.shapes,p=s.diamond,y=s.stepAbs,A=s.move,x=s.dy,u=s.text,d=i.config.label,f=d.yesText,m=d.noText,v=i.config.diamond,w=v.labelMarginX,Z=v.labelMarginY,g=p({x:0,y:0,text:o});l?(t=c.allocate(i.y,g.h+x),$.merge(t,g.h+x)):(t=$.findAllocatablePosition(i.y,g.h+x),c.merge(t,g.h+x)),y(t+x),g.trans(0,i.y),h.add(g),A(g.h);var b={E:{x:g.w/2,y:g.y+g.h/2},W:{x:-g.w/2,y:g.y+g.h/2},S:{x:0,y:g.y+g.h}};return h.add(u({x:b[r].x+w,y:b[r].y+Z,text:f,isLabel:!0})),h.add(u({x:b[a].x+w,y:b[a].y+Z,text:m,isLabel:!0})),b},this.branch=function(){return new e({shapes:new Q({x:i.x,y:i.y,children:[]}),measureText:i.measureText,config:i.config,loopInfo:new _(i.loopInfo.type),LAlloc:i.LAlloc.clone(),RAlloc:i.RAlloc.clone(),x:i.x,y:i.y})},this.merge=function(e){var t,o;e.shapes.children.forEach(function(t){t.trans(e.shapes.x,0),i.shapes.add(t)}),(t=i.loopInfo.breakPoints).push.apply(t,e.loopInfo.breakPoints),(o=i.loopInfo.continuePoints).push.apply(o,e.loopInfo.continuePoints),e.y>i.y&&i.moveAbs(e.y)},this.withLoopType=function(e,t){var o=i,r=o.loopInfo,a=o.LAlloc,n=o.RAlloc;i.loopInfo=new _(e);var l=new S(R()),s=new S(R()),c=l.clone(),$=s.clone();i.LAlloc=l,i.RAlloc=s,t();var h=i.loopInfo;return i.loopInfo=r,i.LAlloc=a,i.RAlloc=n,i.LAlloc.mergeAllocator(c),i.RAlloc.mergeAllocator($),h},this.shapes=o,this.measureText=r,this.config=a,this.loopInfo=n,this.LAlloc=l,this.RAlloc=s,this.alive=!0,this.dy=a.flowchart.stepY,this.dx=a.flowchart.stepX,this.x=c,this.y=$}}(),ja=function(e){var t=e.node,i=e.config,o=e.measureText,r=new ia({shapes:new Q({x:0,y:0,children:[]}),measureText:o,config:i,loopInfo:new _,LAlloc:new S(R()),RAlloc:new S(R()),x:0,y:i.flowchart.marginY});return N(t,r),r.shiftX(-r.shapes.minX+i.flowchart.marginX),r},N=function(e,t,i){void 0===i&&(i=!0);for(var o=t.step,r=t.stepAbs,a=t.dy,n=t.stepAndText,l=t.loopInfo,s=t.LAlloc,c=t.RAlloc,$=e.children,h=$.length,p=0;p<h&&t.alive;){var y=$[p];switch(y.type){case"text":n(y.content);break;case"pass":o();break;case"if":for(var A=[];p<h&&"if"===$[p].type;)A.push($[p]),p++;for(;p<h&&"elif"===$[p].type;)A.push($[p]),p++;for(;p<h&&"else"===$[p].type;)A.push($[p]),p++;ka(A,t);continue;case"while":ta(y,t);break;case"do":var x=y,u=$[p+1];ua(x,u,t),p+=2;continue;case"break":case"continue":var d=Y[l.type][y.type];if(i){if("E"===d){var f=c.allocate(t.y,a);s.merge(f,a),o(f+a-t.y)}else{f=c.findAllocatablePosition(t.y+a,a);s.merge(f,a),c.merge(f,a),r(f)}}else"E"===d?c.merge(t.y-a,a):s.merge(t.y-a,a);var m=l.breakPoints,v=l.continuePoints;("break"===y.type?m:v).push(new M({x:0,y:t.y})),t.alive=!1;}p++}},ka=function(e,t,i){if(void 0===i&&(i=!0),0!==e.length)if("else"!==e[0].type){var o=t.branch(),r=t.branch(),a=e[0],n={direction:"S",isJump:!1,shouldStep:!0},l={direction:"E",isJump:!1,shouldStep:!0};if(a.children.length>0){var s=a.children[0];if("break"===s.type||"continue"===s.type){var c=t.loopInfo.type;n={direction:Y[c][s.type],isJump:!0,shouldStep:!1},l={direction:"S",isJump:!1,shouldStep:!0}}}if(e.length>1&&"else"===e[1].type&&e[1].children.length>0){var $=e[1].children[0];if("break"===$.type||"continue"===$.type){c=t.loopInfo.type;var h=Y[c][$.type];h!==n.direction&&(l={direction:h,isJump:!0,shouldStep:!1})}}var p=t.stepAndDiamond({content:a.content,yesDir:n.direction,noDir:l.direction,jumpLeft:"W"===n.direction&&n.isJump||"W"===l.direction&&l.isJump,jumpRight:"E"===n.direction&&n.isJump||"E"===l.direction&&l.isJump});if(o.moveAbs(p[n.direction].y),N(a,o,n.shouldStep),o.shiftX(p[n.direction].x),r.moveAbs(p[l.direction].y),ka(e.slice(1),r,l.shouldStep),l.isJump)r.shiftX(p[l.direction].x);else if("S"===n.direction){var y=Math.max(p.E.x,o.shapes.maxX)+t.dx-r.shapes.minX;r.shiftX(y),o.shapes.add(k.hline({x:p.E.x,y:p.E.y,step:r.shapes.x-p.E.x}));var A=Math.max(o.y,r.y)+t.dy;o.alive&&o.stepAbs(A),r.alive&&r.stepAbs(A),r.alive&&o.shapes.add(k.hline({x:r.shapes.x,y:A,step:-r.shapes.x+o.shapes.x,isArrow:o.alive}))}else r.shiftX(p[l.direction].x);t.merge(o),t.merge(r),o.alive||r.alive||(t.alive=!1)}else N(e[0],t,i)},ta=function(e,t){var i=t.move,o=t.step,r=t.dx,a=t.withLoopType,n=t.shapes,l=t.stepAndDiamond;o();var s=t.y,c=l({content:e.content,yesDir:"S",noDir:"E"}),$=a("while",function(){N(e,t)}),h=$.breakPoints,p=$.continuePoints,y=X(p),A=X(h);t.alive&&(o(),y.push(new M({x:0,y:t.y}))),A.push(new M(ha({},c.E)));var x=Math.min(c.W.x,n.minX)-r,u=Math.max(c.E.x,n.maxX)+r;y.sort(function(e,t){return e.y>t.y?-1:1}).forEach(function(e,t){0===t?n.add(new k({x:e.x,y:e.y,cmds:[["h",x-e.x],["v",s-e.y],["h",-x]],isArrow:!0})):n.add(k.hline({x:e.x,y:e.y,step:x-e.x,isArrow:!0}))}),i(),A.sort(function(e,t){return e.y<t.y?-1:1}).forEach(function(e,i){0===i?n.add(new k({x:e.x,y:e.y,cmds:[["h",u-c.E.x],["v",t.y-e.y],["h",-u]]})):n.add(k.hline({x:e.x,y:e.y,step:u-e.x,isArrow:!0}))})},ua=function(e,t,i){var o=i.move,r=i.step,a=i.dx,n=i.withLoopType,l=i.shapes,s=i.stepAndDiamond;r();var c,$,h=i.y,p=n("doWhile",function(){N(e,i)}),y=p.breakPoints,A=p.continuePoints,x=X(y),u=0;if(i.alive||A.length>0){A.length>0&&(i.alive?r():o(),u=l.maxX+a,A.sort(function(e,t){return e.y<t.y?-1:1}).forEach(function(e,t){0===t?l.add(new k({x:e.x,y:e.y,cmds:[["h",u-e.x],["v",i.y-e.y],["h",-u]],isArrow:!0})):l.add(k.hline({x:e.x,y:e.y,step:u-e.x,isArrow:!0}))}));var d=s({content:t.content,yesDir:"S",noDir:"E"});r(),c=Math.min(d.W.x,l.minX)-a,l.add(new k({x:0,y:i.y,cmds:[["h",c],["v",h-i.y],["h",-c]],isArrow:!0})),$=Math.max(d.E.x,l.maxX,u)+a,x.push(new M(ha({},d.E)))}else o(),$=l.maxX+a;o(),x.sort(function(e,t){return e.y<t.y?-1:1}).forEach(function(e,t){0===t?l.add(new k({x:e.x,y:e.y,cmds:[["h",$-e.x],["v",i.y-e.y],["h",-$]]})):l.add(k.hline({x:e.x,y:e.y,step:$-e.x,isArrow:!0}))})};I.Flowchart=ia,I.createFlowchart=ja;var T={},j=T&&T.__assign||function(){return(j=Object.assign||function($){for(var a,r=1,t=arguments.length;r<t;r++)for(var l in a=arguments[r])Object.prototype.hasOwnProperty.call(a,l)&&($[l]=a[l]);return $}).apply(this,arguments)},U="100%",B="black",la="white",D={src:{indentStr:"  ",commentStr:"#"},flowchart:{marginX:35,marginY:35,stepX:24,stepY:24},rect:{padX:12,padY:8,attrs:{stroke:B,fill:la,"stroke-width":"2px","fill-opacity":"0%"}},diamond:{aspectRatio:.75,labelMarginX:1,labelMarginY:0,attrs:{stroke:B,fill:la,"fill-opacity":"0%","stroke-width":"2px"}},path:{attrs:{stroke:B,fill:B,"stroke-linecap":"square","stroke-width":"2px","fill-opacity":"0%","stroke-opacity":U}},arrowHead:{size:15,attrs:{stroke:B,fill:B,"fill-opacity":U,"stroke-width":"0px"}},text:{attrs:{stroke:B,fill:B,"fill-opacity":U,"font-size":"14px","stroke-width":"0"}},label:{yesText:"Y",noText:"N",attrs:{stroke:B,fill:B,"fill-opacity":U,"font-size":"10px","font-weight":"lighter"}}},ma=function($){return void 0===$&&($={}),{src:j(j({},D.src),$.src||{}),flowchart:j(j({},D.flowchart),$.flowchart||{}),rect:j(j({},D.rect),$.rect||{}),diamond:j(j({},D.diamond),$.diamond||{}),path:j(j({},D.path),$.path||{}),arrowHead:j(j({},D.arrowHead),$.arrowHead||{}),text:j(j({},D.text),$.text||{}),label:j(j({},D.label),$.label||{})}};T.mergeDefaultConfig=ma,T.defaultConfig=D;var E=W&&W.__assign||function(){return(E=Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}).apply(this,arguments)},va=function(){return function(e){var r=this,t=e.src,a=e.config,n=e.document;this.el=function(e,t){for(var a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];var s=r._document.createElementNS("http://www.w3.org/2000/svg",e);return Object.entries(t||{}).forEach(function(e){var r=e[0],t=e[1];return s.setAttribute("className"===r?"class":r,t.toString())}),(a||[]).forEach(function(e){return s.append(e)}),s},this.createTextSVGElement=function(e,t){var a=r.el,n=a("text",t||{});return e.split(/\\n/).forEach(function(e,r){n.append(a("tspan",{x:t.x,dy:(0===r?0:1)+"em"},e))}),n},this.measureText=function(e,t){void 0===t&&(t={});var a=r,n=a.dummySVG,s=a.createTextSVGElement,i=E(E({},t),{x:t.x||0});r._document.body.append(n);var o=s(e,i);n.append(o);var $=o.getBoundingClientRect(),c=$.width,p=$.height;return n.removeChild(o),r._document.body.removeChild(n),{w:c,h:p}},this.renderShape=function(e){var t=e.layers,a=e.shape,n=e.config,s=e.offsetX,i=void 0===s?0:s,o=e.offsetY,$=void 0===o?0:o,c=r,p=c.el,d=c.createTextSVGElement,h=c.renderShape,C=c.measureText,u=i+a.x,f=$+a.y,g=a.w,l=a.h;switch(a.type){case"group":a.children.forEach(function(e){return h({layers:t,config:n,shape:e,offsetX:u,offsetY:f})});break;case"text":t.textLayer.append(d(a.content,E({x:u,y:f+C("A",a.isLabel?n.label.attrs:n.text.attrs).h/2,"dominant-baseline":"central"},a.isLabel?n.label.attrs:n.text.attrs)));break;case"path":var v="M "+u+" "+f,m=a.cmds.map(function(e){return e.join(" ")}).join(" ");t.pathLayer.append(p("path",E(E({d:v+" "+m},a.isArrow?{"marker-end":"url(#arrow-head)"}:{}),n.path.attrs)));break;case"rect":t.nodeLayer.append(p("rect",E({x:u,y:f,width:g,height:l},n.rect.attrs)));break;case"diamond":t.nodeLayer.append(p("polygon",E({points:u+g/2+","+f+", "+(u+g)+","+(f+l/2)+" "+(u+g/2)+","+(f+l)+" "+u+","+(f+l/2)},n.diamond.attrs)));}},this.render=function(){var e=r,t=e.src,a=e.config,n=e.el,s=e.measureText,i=e.renderShape;a=ma(a);var o=r.el("svg"),$=n("defs",null,n("marker",{id:"arrow-head",markerUnits:"userSpaceOnUse",markerWidth:""+a.arrowHead.size,markerHeight:""+2*a.arrowHead.size,viewBox:"0 0 10 10",refX:"10",refY:"5",orient:"auto-start-reverse"},n("polygon",E({points:"0,0 0,10 10,5",class:"arrow-head"},a.arrowHead.attrs))));o.append($);var c=n("g"),p=n("g"),d=n("g"),h=ja({node:da(t,a),config:a,measureText:s});return i({layers:{pathLayer:c,nodeLayer:p,textLayer:d},shape:h.shapes,config:a}),o.append(c),o.append(p),o.append(d),o.setAttribute("width",(h.shapes.w+2*a.flowchart.marginX).toString()),o.setAttribute("height",(h.shapes.h+2*a.flowchart.marginY).toString()),o},this._document=n,this.src=t,this.config=E(E({},D),a),this.dummySVG=this.el("svg")}}(),na=function(e){return new va(e).render()};W.render=na;var wa=O&&O.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;var a=Array(r),n=0;for(e=0;e<t;e++)for(var c=arguments[e],$=0,f=c.length;$<f;$++,n++)a[n]=c[$];return a},xa={initialize:function(r){wa(document.getElementsByClassName("tefcha")).forEach(function(e){var t=e.textContent;e.textContent="",e.append(na({src:t,document:document,config:r}))})}};window.tefcha=xa;if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=O}else if(typeof define==="function"&&define.amd){define(function(){return O})}})();