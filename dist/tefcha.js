(function () {var K={};function W(r){return La(r)||Ka(r)||Ja(r)||Ia()}function Ia(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ja(r,e){if(r){if("string"==typeof r)return Y(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Y(r,e):void 0}}function Ka(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}function La(r){if(Array.isArray(r))return Y(r)}function Y(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Ma(r){return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function Na(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Oa(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&Z(r,e)}function Pa(r){var e=ra();return function(){var t,n=_(r);if(e){var o=_(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return Qa(this,t)}}function Qa(r,e){return!e||"object"!==Ma(e)&&"function"!=typeof e?Ra(r):e}function Ra(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Sa(r){var e="function"==typeof Map?new Map:void 0;return(Sa=function(r){if(null===r||!Ua(r))return r;if("function"!=typeof r)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(r))return e.get(r);e.set(r,t)}function t(){return Ta(r,arguments,_(this).constructor)}return t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Z(t,r)})(r)}function Ta(r,e,t){return(Ta=ra()?Reflect.construct:function(r,e,t){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(r,n));return t&&Z(o,t.prototype),o}).apply(null,arguments)}function ra(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(r){return!1}}function Ua(r){return-1!==Function.toString.call(r).indexOf("[native code]")}function Z(r,e){return(Z=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r})(r,e)}function _(r){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}Object.defineProperty(K,"__esModule",{value:!0});var sa=(aa=void 0,K.parse=aa);K.TefchaError=sa;var k=function(r){Oa(t,Sa(Error));var e=Pa(t);function t(r){var n=r.lineno,o=r.msg,a=r.src,i=void 0===a?"":a;Na(this,t);var $=o;n&&n>0&&($="at line ".concat(n,": ").concat($));var c="";return i&&n>0&&(c=i.split(/\n/).map(function(r,e){return{lineno:e+1,line:r}}).slice(Math.max(0,n-1-5),n-1+5).map(function(r){var e=r.lineno,t=r.line;return"".concat(e===n?">":" ").concat(e,": ").concat(t)}).join("\n")),e.call(this,"".concat($,"\n").concat(c))}return t}();sa=k,K.TefchaError=sa;var ta=["if","else","elif","while","for","do","switch","case"],Va=[].concat(ta,["continue","break","pass"]),Wa=function(r,e){var t=[],n="",o=e.src,a=o.indentStr,i=o.commentStr;if(r.split(/\r\n|\r|\n/).forEach(function(r,e){if(e++,""!==(r=n+r).trim()){for(var o=0;r.startsWith(a);)o++,r=r.slice(a.length);r.startsWith(i)||(r.endsWith("\\")?n=r.slice(0,-1):(n="",t.push({lineno:e,line:r,nest:o})))}}),""!==n)throw new k({msg:"EOF is found after '\\'"});var $=Math.min.apply(Math,W(t.map(function(r){return r.nest})));return t=t.map(function(r){return Object.assign(Object.assign({},r),{nest:r.nest-$})})},Xa=function(r,e){var t={type:"program",lineno:0,children:[]},n=[t];return r.forEach(function(r){var t=r.lineno,o=r.line,a=r.nest;if(n.length-1<a)throw new k({lineno:t,src:e,msg:"unexpected indent"});for(;n.length-1>a;)n.pop();var i=n.slice(-1)[0],$=o.split(" ")[0];if(Va.includes($)){var c={type:$,lineno:t,content:o.slice(o.indexOf(" ")+1),children:[]},s=i.children.length>0?i.children.slice(-1)[0]:null;i.children.push(c),ta.includes($)&&(s&&"do"===s.type&&"while"===$||n.push(c))}else i.children.push({type:"text",lineno:t,content:o})}),t},ua=function(r,e,t){var n=r.children||[],o={type:"none",lineno:-1};n.forEach(function(a,i){var $=a.lineno;switch(a.type){case"program":case"text":case"if":break;case"else":if(!["if","elif"].includes(o.type))throw new k({lineno:$,src:t,msg:"before \"else\" statement, \"if\" or \"elif\" shoud exists."});break;case"elif":if(!["if","elif"].includes(o.type))throw new k({lineno:$,src:t,msg:"before \"elif\" statement, \"if\" or \"elif\" shoud exists."});break;case"while":case"switch":break;case"case":if("switch"!==r.type)throw new k({lineno:$,src:t,msg:"keyword \"case\" shoud be in \"switch\" statement."});break;case"continue":if(![].concat(W(e),[r]).some(function(r){return["for","while","do"].includes(r.type)}))throw new k({lineno:$,src:t,msg:"\"continue\" statement shoud be in loop"});break;case"break":if(![].concat(W(e),[r]).some(function(r){return["for","while","do","case"].includes(r.type)}))throw new k({lineno:$,src:t,msg:"\"break\" statement shoud be in loop or \"case\"."});break;case"do":if(i+1>=n.length||"while"!==n[i+1].type)throw new k({lineno:$,src:t,msg:"cannot find corresponding keyword \"while\" to keyword \"do\"."});break;case"pass":break;default:throw new k({lineno:$,src:t,msg:"node type \"".concat(a.type,"\" is not implemented yet.")});}o=a}),"switch"===r.type&&n.forEach(function(r){var e=r.lineno;if("case"!==r.type)throw new k({lineno:e,src:t,msg:"".concat(r.type,"\" is found in \"switch\" block. \"switch\" should have \"case\" only")})}),n.forEach(function(n){return ua(n,[].concat(W(e),[r]),t)})},Ya=function(r,e){var t=Wa(r,e),n=Xa(t,r);return ua(n,[],r),n},aa=Ya;K.parse=aa;var j={};function L(r){return _a(r)||$a(r)||va(r)||Za()}function Za(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $a(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}function _a(r){if(Array.isArray(r))return ba(r)}function ab(r,t){return db(r)||cb(r,t)||va(r,t)||bb()}function bb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function va(r,t){if(r){if("string"==typeof r)return ba(r,t);var $=Object.prototype.toString.call(r).slice(8,-1);return"Object"===$&&r.constructor&&($=r.constructor.name),"Map"===$||"Set"===$?Array.from(r):"Arguments"===$||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?ba(r,t):void 0}}function ba(r,t){(null==t||t>r.length)&&(t=r.length);for(var $=0,e=new Array(t);$<t;$++)e[$]=r[$];return e}function cb(r,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r)){var $=[],e=!0,a=!1,o=void 0;try{for(var s,n=r[Symbol.iterator]();!(e=(s=n.next()).done)&&($.push(s.value),!t||$.length!==t);e=!0);}catch(u){a=!0,o=u}finally{try{e||null==n.return||n.return()}finally{if(a)throw o}}return $}}function db(r){if(Array.isArray(r))return r}function eb(r){return(eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function F(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&fb(r,t)}function fb(r,t){return(fb=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r})(r,t)}function G(r){var t=hb();return function(){var $,e=xa(r);if(t){var a=xa(this).constructor;$=Reflect.construct(e,arguments,a)}else $=e.apply(this,arguments);return gb(this,$)}}function gb(r,t){return!t||"object"!==eb(t)&&"function"!=typeof t?wa(r):t}function wa(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function hb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(r){return!1}}function xa(r){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function B(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(j,"__esModule",{value:!0});var ya=(J=void 0,q=j.Point=J,da=j.Path=q,ea=j.Text=da,fa=j.Rect=ea,N=j.Diamond=fa,j.Group=N);j.BaseShape=ya;var H=Math.max,I=Math.min,E=function r(t){var $=this,e=t.x,a=void 0===e?0:e,o=t.y,s=void 0===o?0:o,n=t.w,u=void 0===n?0:n,i=t.h,v=void 0===i?0:i,C=t.minX,c=void 0===C?0:C,p=t.minY,l=void 0===p?0:p,y=t.maxX,x=void 0===y?0:y,h=t.maxY,f=void 0===h?0:h;B(this,r),this.trans=function(r,t){return $.x+=r,$.y+=t,$},this.x=a,this.y=s,this.w=u,this.h=v,this.minX=c,this.minY=l,this.maxX=x,this.maxY=f};ya=E,j.BaseShape=ya;var za=function(r){F($,E);var t=G($);function $(r){var e,a=r.x,o=r.y;return B(this,$),(e=t.call(this,{x:a,y:o})).clone=function(){return new $({x:e.x,y:e.y})},e.type="point",e}return $}(),J=za;j.Point=J;var M=function(r){F($,E);var t=G($);function $(r){var e,a=r.x,o=r.y,s=r.cmds,n=r.isArrow,u=void 0!==n&&n;B(this,$);var i=0,v=0,C=0,c=0,p=0,l=0;return s.forEach(function(r){var t=ab(r,2),$=t[0],e=t[1];"h"===$?i+=e:v+=e,C=I(C,i),c=I(c,v),p=H(p,i),l=H(l,v)}),(e=t.call(this,{x:a,y:o,minX:C,minY:c,maxX:p,maxY:l,w:p-C,h:l-c})).cmds=s,e.isArrow=u,e.type="path",e}return $}(),q=M;j.Path=q,M.vline=function(r){var t=r.x,$=r.y,e=r.step,a=r.isArrow;return new M({x:t,y:$,cmds:[["v",e]],isArrow:void 0!==a&&a})},M.hline=function(r){var t=r.x,$=r.y,e=r.step,a=r.isArrow;return new M({x:t,y:$,cmds:[["h",e]],isArrow:void 0!==a&&a})};var ca=function(r){F($,E);var t=G($);function $(r){var e,a=r.content,o=r.w,s=r.h,n=r.x,u=void 0===n?0:n,i=r.y,v=void 0===i?0:i,C=r.isLabel,c=void 0!==C&&C;return B(this,$),(e=t.call(this,{x:u,y:v,maxX:o,maxY:s,w:o,h:s})).content=a,e.type="text",e.isLabel=c,e}return $}(),da=ca;j.Text=da,ca.byMeas=function(r){var t=r.x,$=void 0===t?0:t,e=r.y,a=void 0===e?0:e,o=r.text,s=r.attrs,n=r.meas,u=r.isLabel,i=n(o,s),v=i.w,C=i.h;return new ca({content:o,x:$,y:a,w:v,h:C,isLabel:u})};var ib=function(r){F($,E);var t=G($);function $(r){var e,a=r.x,o=void 0===a?0:a,s=r.y,n=void 0===s?0:s,u=r.w,i=r.h;return B(this,$),(e=t.call(this,{x:o,y:n,w:u,h:i,maxX:u,maxY:i})).type="rect",e}return $}(),ea=ib;j.Rect=ea;var jb=function(r){F($,E);var t=G($);function $(r){var e,a=r.x,o=void 0===a?0:a,s=r.y,n=void 0===s?0:s,u=r.w,i=r.h;return B(this,$),(e=t.call(this,{x:o,y:n,w:u,h:i,maxX:u,maxY:i})).type="diamond",e}return $}(),fa=jb;j.Diamond=fa;var kb=function(r){F($,E);var t=G($);function $(r){var e,a=r.x,o=r.y,s=r.children;return B(this,$),(e=t.call(this,{x:a,y:o})).add=function(r){return e.minX=I(e.minX,r.x+r.minX),e.minY=I(e.minY,r.y+r.minY),e.maxX=H(e.maxX,r.x+r.maxX),e.maxY=H(e.maxY,r.y+r.maxY),e.w=e.maxX-e.minX,e.h=e.maxY-e.minY,e.children.push(r),wa(e)},0===s.length&&(s=[].concat(L(s),[new za({x:a,y:o})])),e.minX=I.apply(void 0,L(s.map(function(r){return r.x+r.minX}))),e.minY=I.apply(void 0,L(s.map(function(r){return r.y+r.minY}))),e.maxX=H.apply(void 0,L(s.map(function(r){return r.x+r.maxX}))),e.maxY=H.apply(void 0,L(s.map(function(r){return r.y+r.maxY}))),e.w=e.maxX-e.minX,e.h=e.maxY-e.minY,e.type="group",e.children=s,e}return $}(),N=kb;j.Group=N;var O={};function lb(r){return ob(r)||nb(r)||Aa(r)||mb()}function mb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nb(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}function ob(r){if(Array.isArray(r))return ga(r)}function pb(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function qb(r,e){return tb(r)||sb(r,e)||Aa(r,e)||rb()}function rb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Aa(r,e){if(r){if("string"==typeof r)return ga(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ga(r,e):void 0}}function ga(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=r[t];return a}function sb(r,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r)){var t=[],a=!0,n=!1,o=void 0;try{for(var $,i=r[Symbol.iterator]();!(a=($=i.next()).done)&&(t.push($.value),!e||t.length!==e);a=!0);}catch(l){n=!0,o=l}finally{try{a||null==i.return||i.return()}finally{if(n)throw o}}return t}}function tb(r){if(Array.isArray(r))return r}Object.defineProperty(O,"__esModule",{value:!0});var P=(Q=void 0,O.createRangeList=Q);O.RangeAllocator=P;var Ba=function(){for(var r={start:-1/0,end:-1/0,next:null},e=r,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];a.forEach(function(r){var t=qb(r,2),a={start:t[0],end:t[1],next:null};e.next=a,e=a});var o={start:1/0,end:1/0,next:null};return e.next=o,r},Q=Ba;O.createRangeList=Q;var ub=function r(e){var t=this;pb(this,r),this.clone=function(){return new r(t.ref)},this.cloneDeep=function(){return new r(Ba.apply(void 0,lb(t.ranges().map(function(r){return[r.start,r.end]}))))},this.findSpace=function(r,e){for(var a=t.ref;a.next.start<r;)a=a.next;for(var n=Math.max(r,a.end);a.next.start-n<e;)n=(a=a.next).end;return t.ref=a,n},this.allocate=function(r,e){var a=t.findSpace(r,e),n=a+e,o=t.ref;if(o.end===a)o.next.start===n?(o.end=o.next.end,o.next=o.next.next):o.end=n;else if(o.next.start===n)o.next.start=a,t.ref=o.next;else{var $={start:a,end:n,next:o.next};o.next=$,t.ref=$}return a},this.merge=function(r,e){var a=r+e;r=Math.max(r,t.ref.start);for(var n,o=t.ref;o.next.start<=r;)o=o.next;for(r<=o.end?n=o:(n={start:r,end:r,next:o.next},o.next=n,o=n);o.next.start<=a;)o=o.next;a<=o.end?(n.end=o.end,n.next=o.next):(n.end=a,n.next=o.next),t.ref=n},this.ranges=function(){var r=[],e=t.ref;for(e.start===-1/0&&(e=e.next);e.start!==1/0;)r.push({start:e.start,end:e.end}),e=e.next;return r},this.mergeAllocator=function(r){r.ranges().forEach(function(r){var e=r.start,a=r.end;t.merge(e,a-e)})},this.ref=e};P=ub,O.RangeAllocator=P;var R={};function S(e){return yb(e)||xb(e)||wb(e)||vb()}function vb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wb(e,r){if(e){if("string"==typeof e)return ha(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ha(e,r):void 0}}function xb(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function yb(e){if(Array.isArray(e))return ha(e)}function ha(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,t=new Array(r);a<r;a++)t[a]=e[a];return t}function Ca(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(R,"__esModule",{value:!0});var Da=(ka=void 0,R.createFlowchart=ka);R.Flowchart=Da;var ia={while:{break:"E",continue:"W"},doWhile:{break:"E",continue:"E"},for:{break:"E",continue:"W"}},ja=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"none";Ca(this,e),this.type=r,this.breaks=[],this.continues=[]},Ea=function e(r){var a=this,t=r.shapes,o=r.measureText,n=r.config,s=r.loop,i=r.AllocW,c=r.AllocE,$=r.x,l=r.y;Ca(this,e),this.shiftX=function(e){var r=a.shapes,t=a.loop;r.trans(e,0),a.x+=e;var o=t.breaks,n=t.continues;o.forEach(function(r){return r.trans(e,0)}),n.forEach(function(r){return r.trans(e,0)})},this.step=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.dy;a.shapes.add(q.vline({x:0,y:a.y,step:e})),a.move(e)},this.stepAbs=function(e){a.step(e-a.y)},this.move=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.dy;a.y+=e},this.moveAbs=function(e){a.move(e-a.y)},this.rect=function(e){var r=e.x,t=e.y,o=e.text,n=a.measureText(o,a.config.text.attrs),s=n.w,i=n.h,c=a.config.rect,$=s+2*c.padX,l=i+2*c.padY;return a.wrapText({cls:ea,text:o,x:r,y:t,w:$,h:l,tw:s,th:i})},this.diamond=function(e){var r=e.x,t=e.y,o=e.text,n=a.measureText(o,a.config.text.attrs),s=n.w,i=n.h,c=a.config.diamond.aspectRatio,$=s+i/c,l=i+s*c;return a.wrapText({cls:fa,text:o,x:r,y:t,w:$,h:l,tw:s,th:i})},this.wrapText=function(e){var r=e.cls,t=e.text,o=e.x,n=e.y,s=e.w,i=e.h,c=e.tw,$=e.th,l=a.text({text:t,x:-c/2,y:i/2-$/2,isLabel:!1}),h=new r({x:-s/2,w:s,h:i});return new N({x:o,y:n,children:[l,h]})},this.text=function(e){var r=e.x,t=e.y,o=e.text,n=e.isLabel;return da.byMeas({x:r,y:t,text:o,attrs:a.config.text.attrs,meas:a.measureText,isLabel:n})},this.stepText=function(e){var r=a.dy,t=a.rect({x:0,y:0,text:e}),o=a.AllocE.findSpace(a.y,t.h+r);a.AllocW.merge(o,t.h+r),a.stepAbs(o+r),t.trans(0,a.y),a.shapes.add(t),a.move(t.h)},this.stepCond=function(e){var r=e.content,t=e.yesDir,o=e.noDir,n=e.jumpW,s=e.jumpE,i=a.AllocW,c=a.AllocE,$=a.shapes,l=a.diamond,h=a.text,p=a.stepAbs,w=a.move,v=a.dy,y=a.config.label,u=y.yesText,x=y.noText,T=a.config.diamond,d=T.labelMarginX,f=T.labelMarginY,m=l({x:0,y:0,text:r}),D=(n?i:c).findSpace(a.y,m.h+v);i.merge(D,m.h+v),s&&c.merge(D,m.h+v),p(D+v),m.trans(0,a.y),$.add(m),w(m.h);var b={E:{x:m.w/2,y:m.y+m.h/2},W:{x:-m.w/2,y:m.y+m.h/2},S:{x:0,y:m.y+m.h}};return $.add(h({x:b[t].x+d,y:b[t].y+f,text:u,isLabel:!0})),$.add(h({x:b[o].x+d,y:b[o].y+f,text:x,isLabel:!0})),b},this.branch=function(){return new e({shapes:new N({x:a.x,y:a.y,children:[]}),measureText:a.measureText,config:a.config,loop:new ja(a.loop.type),AllocW:a.AllocW.clone(),AllocE:a.AllocE.clone(),x:a.x,y:a.y})},this.merge=function(e){var r,t;e.shapes.children.forEach(function(r){r.trans(e.shapes.x,0),a.shapes.add(r)}),(r=a.loop.breaks).push.apply(r,S(e.loop.breaks)),(t=a.loop.continues).push.apply(t,S(e.loop.continues)),e.y>a.y&&a.moveAbs(e.y)},this.withLoop=function(e,r){var t=a.loop,o=a.AllocW,n=a.AllocE;a.loop=new ja(e);var s=new P(Q()),i=n.cloneDeep(),c=s.clone(),$=i.clone();a.AllocW=s,a.AllocE=i,r();var l=a.loop;return a.loop=t,a.AllocW=o,a.AllocE=n,a.AllocW.mergeAllocator(c),a.AllocW.mergeAllocator($),l},this.shapes=t,this.measureText=o,this.config=n,this.loop=s,this.AllocW=i,this.AllocE=c,this.alive=!0,this.dy=n.flowchart.stepY,this.dx=n.flowchart.stepX,this.x=$,this.y=l};Da=Ea,R.Flowchart=Da;var zb=function(e){var r=e.node,a=e.config,t=e.measureText,o=new Ea({shapes:new N({x:0,y:0,children:[]}),measureText:t,config:a,loop:new ja,AllocW:new P(Q()),AllocE:new P(Q()),x:0,y:a.flowchart.marginY});return U(r,o),o.shiftX(-o.shapes.minX+a.flowchart.marginX),o},ka=zb;R.createFlowchart=ka;var U=function(e,r){for(var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=r.step,o=r.stepAbs,n=r.stepText,s=r.dy,i=r.AllocW,c=r.AllocE,$=r.loop,l=e.children,h=l.length,p=0;p<h&&r.alive;){var w=l[p];switch(w.type){case"text":n(w.content);break;case"pass":t();break;case"if":var v=[];for(p<h&&"if"===l[p].type&&(v.push(l[p]),p++);p<h&&"elif"===l[p].type;)v.push(l[p]),p++;p<h&&"else"===l[p].type&&(v.push(l[p]),p++),Fa(v,r);continue;case"while":Ab(w,r);break;case"do":Bb(w,l[p+1],r),p+=2;continue;case"break":case"continue":var y=ia[$.type][w.type],u=a?r.y-s:("W"===y?i:c).findSpace(r.y,s);i.merge(u,s),"E"===y&&c.merge(u,s),a||o(u+s);var x=$.breaks,T=$.continues;("break"===w.type?x:T).push(new J({x:0,y:r.y})),r.alive=!1;}p++}},Fa=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0!==e.length)if("else"!==e[0].type){var t=r.dx,o=r.dy,n=r.branch(),s=r.branch(),i=r.loop.type,c=e[0],$={dir:"S",jump:!1},l={dir:"E",jump:!1};if(c.children.length>0){var h=c.children[0].type;"break"!==h&&"continue"!==h||($={dir:ia[i][h],jump:!0},l={dir:"S",jump:!1})}if(e.length>1&&"else"===e[1].type&&e[1].children.length>0){var p=e[1].children[0].type;if("break"===p||"continue"===p){var w=ia[i][p];w!==$.dir&&(l={dir:w,jump:!0})}}var v=r.stepCond({content:c.content,yesDir:$.dir,noDir:l.dir,jumpW:$.jump&&"W"===$.dir||l.jump&&"W"===l.dir,jumpE:$.jump&&"E"===$.dir||l.jump&&"E"===l.dir});if(n.moveAbs(v[$.dir].y),U(c,n,$.jump),n.shiftX(v[$.dir].x),s.moveAbs(v[l.dir].y),Fa(e.slice(1),s,l.jump),l.jump||$.jump)s.shiftX(v[l.dir].x);else{var y,u=Math.max(v.E.x,n.shapes.maxX)+t-s.shapes.minX;if(s.shiftX(u),n.shapes.add(q.hline({x:v.E.x,y:v.E.y,step:s.shapes.x-v.E.x})),s.alive){var x=r.AllocE.findSpace(Math.max(n.y,s.y),o);r.AllocW.merge(x,o),y=x+o}else y=Math.max(n.y,s.y);n.alive&&n.stepAbs(y),s.alive&&s.stepAbs(y),s.alive&&n.shapes.add(q.hline({x:s.shapes.x,y:y,step:-s.shapes.x+n.shapes.x,isArrow:n.alive}))}r.merge(n),r.merge(s),n.alive||s.alive||(r.alive=!1)}else U(e[0],r,a)},Ab=function(e,r){var a=r.branch(),t=a.move,o=a.stepAbs,n=a.dx,s=a.dy,i=a.stepCond,c=a.withLoop,$=a.shapes,l=a.AllocW,h=a.AllocE,p=h.findSpace(a.y,s);l.merge(p,s),o(p+s);var w=a.y,v=i({content:e.content,yesDir:"S",noDir:"E",jumpE:!1,jumpW:!1}),y=c("while",function(){U(e,a)}),u=y.breaks,x=S(y.continues),T=S(u);if(a.alive){var d=h.findSpace(a.y,s);l.merge(d,s),o(d+s),x.push(new J({x:0,y:a.y}))}T.push(new J(Object.assign({},v.E)));var f=Math.min(v.W.x,$.minX)-n,m=Math.max(v.E.x,$.maxX)+n;x.sort(function(e,r){return e.y>r.y?-1:1}).forEach(function(e,r){$.add(new q({x:e.x,y:e.y,isArrow:!0,cmds:0===r?[["h",f-e.x],["v",w-e.y],["h",-f]]:[["h",f-e.x]]}))}),t(),T.sort(function(e,r){return e.y<r.y?-1:1}).forEach(function(e,r){$.add(new q({x:e.x,y:e.y,isArrow:0!==r,cmds:0===r?[["h",m-e.x],["v",a.y-e.y],["h",-m]]:[["h",m-e.x]]}))}),r.merge(a)},Bb=function(e,r,a){var t=a.branch(),o=t.move,n=t.step,s=t.stepAbs,i=t.dx,c=t.dy,$=t.stepCond,l=t.shapes,h=t.withLoop,p=t.AllocW,w=t.AllocE.findSpace(t.y,c);p.merge(w,c),s(w+c);var v,y,u=t.y,x=h("doWhile",function(){U(e,t)}),T=x.breaks,d=x.continues,f=S(T),m=0;if(t.alive||d.length>0){d.length>0&&(t.alive?n():o(),m=l.maxX+i,d.sort(function(e,r){return e.y<r.y?-1:1}).forEach(function(e,r){l.add(new q({x:e.x,y:e.y,isArrow:!0,cmds:0===r?[["h",m-e.x],["v",t.y-e.y],["h",-m]]:[["h",m-e.x]]}))}));var D=$({content:r.content,yesDir:"S",noDir:"E",jumpW:!1,jumpE:!1});n(),v=Math.min(D.W.x,l.minX)-i,l.add(new q({x:0,y:t.y,isArrow:!0,cmds:[["h",v],["v",u-t.y],["h",-v]]})),y=Math.max(D.E.x,l.maxX,m)+i,f.push(new J(Object.assign({},D.E)))}else o(),y=l.maxX+i;o(),f.sort(function(e,r){return e.y<r.y?-1:1}).forEach(function(e,r){l.add(new q({x:e.x,y:e.y,isArrow:0!==r,cmds:0===r?[["h",y-e.x],["v",t.y-e.y],["h",-y]]:[["h",y-e.x]]}))}),a.merge(t)};var V={};Object.defineProperty(V,"__esModule",{value:!0});var la=(ma=void 0,V.defaultConfig=ma);V.mergeDefaultConfig=la;var X="100%",z="black",Ga="white",A={src:{indentStr:"  ",commentStr:"#"},flowchart:{marginX:35,marginY:35,stepX:24,stepY:24},rect:{padX:12,padY:8,attrs:{stroke:z,fill:Ga,"stroke-width":"2px","fill-opacity":"0%"}},diamond:{aspectRatio:.75,labelMarginX:1,labelMarginY:0,attrs:{stroke:z,fill:Ga,"fill-opacity":"0%","stroke-width":"2px"}},path:{attrs:{stroke:z,fill:z,"stroke-linecap":"square","stroke-width":"2px","fill-opacity":"0%","stroke-opacity":X}},arrowHead:{size:15,attrs:{stroke:z,fill:z,"fill-opacity":X,"stroke-width":"0px"}},text:{attrs:{stroke:z,fill:z,"fill-opacity":X,"font-size":"14px","stroke-width":"0"}},label:{yesText:"Y",noText:"N",attrs:{stroke:z,fill:z,"fill-opacity":X,"font-size":"10px","font-weight":"lighter"}}},ma=A;V.defaultConfig=ma;var Cb=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{src:Object.assign(Object.assign({},A.src),t.src||{}),flowchart:Object.assign(Object.assign({},A.flowchart),t.flowchart||{}),rect:Object.assign(Object.assign({},A.rect),t.rect||{}),diamond:Object.assign(Object.assign({},A.diamond),t.diamond||{}),path:Object.assign(Object.assign({},A.path),t.path||{}),arrowHead:Object.assign(Object.assign({},A.arrowHead),t.arrowHead||{}),text:Object.assign(Object.assign({},A.text),t.text||{}),label:Object.assign(Object.assign({},A.label),t.label||{})}};la=Cb,V.mergeDefaultConfig=la;var na={};function Db(e,r){return Hb(e)||Gb(e,r)||Fb(e,r)||Eb()}function Eb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fb(e,r){if(e){if("string"==typeof e)return Ha(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ha(e,r):void 0}}function Ha(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,t=new Array(r);a<r;a++)t[a]=e[a];return t}function Gb(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],t=!0,n=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(t=(i=c.next()).done)&&(a.push(i.value),!r||a.length!==r);t=!0);}catch(s){n=!0,o=s}finally{try{t||null==c.return||c.return()}finally{if(n)throw o}}return a}}function Hb(e){if(Array.isArray(e))return e}function Ib(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(na,"__esModule",{value:!0});var oa=void 0;na.render=oa;var Jb=function e(r){var a=this,t=r.src,n=r.config,o=r.document;Ib(this,e),this.el=function(e,r){var t=a._document.createElementNS("http://www.w3.org/2000/svg",e);Object.entries(r||{}).forEach(function(e){var r=Db(e,2),a=r[0],n=r[1];return t.setAttribute("className"===a?"class":a,n.toString())});for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];return(o||[]).forEach(function(e){return t.append(e)}),t},this.createTextSVGElement=function(e,r){var t=a.el,n=t("text",r||{});return e.split(/\\n/).forEach(function(e,a){n.append(t("tspan",{x:r.x,dy:"".concat(0===a?0:1,"em")},e))}),n},this.measureText=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=a.dummySVG,n=a.createTextSVGElement,o=Object.assign(Object.assign({},r),{x:r.x||0});a._document.body.append(t);var i=n(e,o);t.append(i);var c=i.getBoundingClientRect(),s=c.width,$=c.height;return t.removeChild(i),a._document.body.removeChild(t),{w:s,h:$}},this.renderShape=function(e){var r=e.layers,t=e.shape,n=e.config,o=e.offsetX,i=void 0===o?0:o,c=e.offsetY,s=void 0===c?0:c,$=a.el,l=a.createTextSVGElement,d=a.renderShape,p=a.measureText,u=i+t.x,h=s+t.y,f=t.w,v=t.h;switch(t.type){case"group":t.children.forEach(function(e){return d({layers:r,config:n,shape:e,offsetX:u,offsetY:h})});break;case"text":r.textLayer.append(l(t.content,Object.assign({x:u,y:h+p("A",t.isLabel?n.label.attrs:n.text.attrs).h/2,"dominant-baseline":"central"},t.isLabel?n.label.attrs:n.text.attrs)));break;case"path":var y="M ".concat(u," ").concat(h),g=t.cmds.map(function(e){return e.join(" ")}).join(" ");r.pathLayer.append($("path",Object.assign(Object.assign({d:"".concat(y," ").concat(g)},t.isArrow?{"marker-end":"url(#arrow-head)"}:{}),n.path.attrs)));break;case"rect":r.nodeLayer.append($("rect",Object.assign({x:u,y:h,width:f,height:v},n.rect.attrs)));break;case"diamond":r.nodeLayer.append($("polygon",Object.assign({points:"".concat(u+f/2,",").concat(h,", ").concat(u+f,",").concat(h+v/2," ").concat(u+f/2,",").concat(h+v," ").concat(u,",").concat(h+v/2)},n.diamond.attrs)));}},this.render=function(){var e=a.src,r=a.config,t=a.el,n=a.measureText,o=a.renderShape;r=la(r);var i=a.el("svg"),c=t("defs",null,t("marker",{id:"arrow-head",markerUnits:"userSpaceOnUse",markerWidth:"".concat(r.arrowHead.size),markerHeight:"".concat(2*r.arrowHead.size),viewBox:"0 0 10 10",refX:"10",refY:"5",orient:"auto-start-reverse"},t("polygon",Object.assign({points:"0,0 0,10 10,5",class:"arrow-head"},r.arrowHead.attrs))));i.append(c);var s=t("g"),$=t("g"),l=t("g"),d=ka({node:aa(e,r),config:r,measureText:n});return o({layers:{pathLayer:s,nodeLayer:$,textLayer:l},shape:d.shapes,config:r}),i.append(s),i.append($),i.append(l),i.setAttribute("width",(d.shapes.w+2*r.flowchart.marginX).toString()),i.setAttribute("height",(d.shapes.h+2*r.flowchart.marginY).toString()),i},this._document=o,this.src=t,this.config=Object.assign(Object.assign({},ma),n),this.dummySVG=this.el("svg")},Kb=function(e){return new Jb(e).render()};oa=Kb,na.render=oa;var pa={};function Lb(r){return Pb(r)||Ob(r)||Nb(r)||Mb()}function Mb(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nb(r,e){if(r){if("string"==typeof r)return qa(r,e);var a=Object.prototype.toString.call(r).slice(8,-1);return"Object"===a&&r.constructor&&(a=r.constructor.name),"Map"===a||"Set"===a?Array.from(r):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?qa(r,e):void 0}}function Ob(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}function Pb(r){if(Array.isArray(r))return qa(r)}function qa(r,e){(null==e||e>r.length)&&(e=r.length);for(var a=0,t=new Array(e);a<e;a++)t[a]=r[a];return t}Object.defineProperty(pa,"__esModule",{value:!0});var Qb={initialize:function(r){Lb(document.getElementsByClassName("tefcha")).forEach(function(e){var a=e.textContent;e.textContent="",e.append(oa({src:a,document:document,config:r}))})}};window.tefcha=Qb;if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=pa}else if(typeof define==="function"&&define.amd){define(function(){return pa})}})();